@if (passingPrediction$ | async; as data) {
  <mat-card class="prediction-card">
    <mat-card-content class="card-content">
      <h2 class="subject-name">{{ data.subjectName }}</h2>

      <div class="mark-section">
        <span class="mark-label">Známka:</span>
        <span [ngClass]="getMarkClass(data.mark)" class="mark-value">{{ data.mark }}</span>
      </div>

      <div class="probability-section">
        <p class="probability-label">Pravdepodobnosť absolvovania predmetu:</p>
        <p class="probability-value">{{ data.passingProbability | number:'1.2-2' }}%</p>
        <div class="progress-bar-container">
          <div
            class="progress-bar-fill"
            [ngClass]="getProgressBarClass(data.passingProbability)"
            [style.width.%]="data.passingProbability">
          </div>
        </div>
      </div>

      <div class="recommendations-section">
        <h3 class="recommendations-title">Tipy pre zlepšenie úspechu:</h3>
        <ul class="recommendations-list">
          @for (recommendation of data.recommendations; track recommendation) {
            <li class="recommendation-item">
              <mat-icon class="recommendation-icon">lightbulb</mat-icon>
              <p class="recommendation-text">{{ recommendation }}</p>
            </li>
          }
        </ul>
      </div>
    </mat-card-content>
  </mat-card>
}
